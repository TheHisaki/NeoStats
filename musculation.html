<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Musculation - NeoStats</title>
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="container">
        <div class="nav-brand">
          <a href="index.html">
            <h1>ğŸ’ª NeoStats</h1>
          </a>
        </div>
        <button
          class="mobile-menu-toggle"
          id="mobileMenuToggle"
          aria-label="Menu"
        >
          â˜°
        </button>
        <ul class="nav-menu" id="navMenu">
          <li><a href="index.html">Accueil</a></li>
          <li><a href="musculation.html" class="active">Musculation</a></li>
          <li><a href="mes-stats.html">Mes Stats</a></li>
        </ul>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <div class="page-header">
          <h1 class="page-title">ğŸ’ª Musculation</h1>
          <p class="page-subtitle">
            Enregistrez vos exercices et suivez votre progression
          </p>
        </div>

        <!-- Add Stats Section -->
        <section class="add-stats-section">
          <div class="section-header">
            <h2>â• Nouvel exercice</h2>
            <p>Ajoutez vos performances pour cet exercice</p>
          </div>

          <form id="addStatsForm" class="stats-form">
            <!-- Date Input -->
            <div class="input-group-modern">
              <div class="input-icon">ğŸ“…</div>
              <div class="input-wrapper">
                <label for="date">Date de l'exercice</label>
                <input type="date" id="date" name="date" required />
              </div>
            </div>

            <!-- Muscle Group Selection -->
            <div class="muscle-group-selection-section">
              <label class="section-label"
                >ğŸ¯ Choisissez un groupe musculaire</label
              >
              <div id="muscleGroupGrid" class="muscle-group-grid">
                <!-- Les groupes musculaires seront gÃ©nÃ©rÃ©s dynamiquement -->
              </div>
            </div>

            <!-- Exercise Selection -->
            <div
              class="exercise-selection-section"
              id="exerciseSelectionSection"
              style="display: none"
            >
              <label class="section-label" id="exerciseSectionLabel"
                >ğŸ’ª Choisissez un exercice</label
              >

              <!-- Exercise Sort/Filter Controls -->
              <div
                id="exerciseSortFilter"
                class="exercise-sort-filter"
                style="display: none"
              >
                <div class="sort-filter-label">
                  <span>ğŸ”€ Trier/Filtrer:</span>
                </div>
                <div class="sort-filter-buttons">
                  <button
                    type="button"
                    class="sort-filter-btn active"
                    data-sort="alphabetic-asc"
                    title="A-Z"
                  >
                    A-Z
                  </button>
                  <button
                    type="button"
                    class="sort-filter-btn"
                    data-sort="alphabetic-desc"
                    title="Z-A"
                  >
                    Z-A
                  </button>
                  <button
                    type="button"
                    class="sort-filter-btn"
                    data-filter="poulie"
                    title="Poulie"
                  >
                    ğŸ”½ Poulie
                  </button>
                  <button
                    type="button"
                    class="sort-filter-btn"
                    data-filter="machine"
                    title="Machine"
                  >
                    âš™ï¸ Machine
                  </button>
                  <button
                    type="button"
                    class="sort-filter-btn"
                    data-filter="poidsDeCorps"
                    title="Poids de corps"
                  >
                    ğŸ¤¸ Poids de corps
                  </button>
                  <button
                    type="button"
                    class="sort-filter-btn"
                    data-filter="sansMateriel"
                    title="Sans matÃ©riel"
                  >
                    ğŸ  Sans matÃ©riel
                  </button>
                  <button
                    type="button"
                    class="sort-filter-btn"
                    data-filter="favoris"
                    title="Favoris"
                  >
                    â­ Favoris
                  </button>
                  <button
                    type="button"
                    class="sort-filter-btn"
                    data-filter="all"
                    title="Tous"
                  >
                    ğŸ”„ Tous
                  </button>
                </div>
              </div>

              <div id="exerciseGrid" class="exercise-grid">
                <!-- Les exercices seront gÃ©nÃ©rÃ©s dynamiquement -->
              </div>

              <!-- Custom Exercise Input -->
              <div
                id="customExerciseGroup"
                class="custom-exercise-group"
                style="display: none"
              >
                <div class="input-group-modern">
                  <div class="input-icon">âœï¸</div>
                  <div class="input-wrapper">
                    <label for="customExercise">Nom de l'exercice</label>
                    <input
                      type="text"
                      id="customExercise"
                      name="customExercise"
                      placeholder="Ex: DÃ©veloppÃ© couchÃ© inclinÃ©"
                      autocomplete="off"
                    />
                  </div>
                </div>
              </div>
            </div>

            <!-- Selected Exercise Preview -->
            <div
              id="selectedExercisePreview"
              class="selected-exercise-preview"
              style="display: none"
            >
              <div class="preview-image-container">
                <img
                  id="previewExerciseImage"
                  src=""
                  alt=""
                  class="preview-exercise-image"
                />
                <div
                  id="previewExerciseIcon"
                  class="preview-exercise-icon"
                  style="display: none"
                ></div>
              </div>
              <h3 id="previewExerciseName" class="preview-exercise-name"></h3>
              <div
                id="previewMuscleZone"
                class="preview-muscle-zone"
                style="display: none"
              >
                <span
                  id="previewMuscleZoneIcon"
                  class="preview-muscle-zone-icon"
                ></span>
                <span
                  id="previewMuscleZoneText"
                  class="preview-muscle-zone-text"
                ></span>
              </div>
            </div>

            <!-- Workout Details -->
            <div class="workout-details-grid">
              <div class="input-group-modern input-with-stepper">
                <div class="input-icon">ğŸ‹ï¸</div>
                <div class="input-wrapper">
                  <label for="weight">Poids (kg)</label>
                  <div class="stepper-group">
                    <button
                      type="button"
                      class="stepper-btn"
                      data-target="weight"
                      data-action="decrease"
                    >
                      âˆ’
                    </button>
                    <input
                      type="number"
                      id="weight"
                      name="weight"
                      step="0.5"
                      min="0"
                      value="20"
                      required
                    />
                    <button
                      type="button"
                      class="stepper-btn"
                      data-target="weight"
                      data-action="increase"
                    >
                      +
                    </button>
                  </div>
                </div>
              </div>

              <div class="input-group-modern input-with-stepper">
                <div class="input-icon">ğŸ”„</div>
                <div class="input-wrapper">
                  <label for="reps">RÃ©pÃ©titions</label>
                  <div class="stepper-group">
                    <button
                      type="button"
                      class="stepper-btn"
                      data-target="reps"
                      data-action="decrease"
                    >
                      âˆ’
                    </button>
                    <input
                      type="number"
                      id="reps"
                      name="reps"
                      min="1"
                      value="10"
                      required
                    />
                    <button
                      type="button"
                      class="stepper-btn"
                      data-target="reps"
                      data-action="increase"
                    >
                      +
                    </button>
                  </div>
                </div>
              </div>

              <div class="input-group-modern input-with-stepper">
                <div class="input-icon">ğŸ“Š</div>
                <div class="input-wrapper">
                  <label for="sets">SÃ©ries</label>
                  <div class="stepper-group">
                    <button
                      type="button"
                      class="stepper-btn"
                      data-target="sets"
                      data-action="decrease"
                    >
                      âˆ’
                    </button>
                    <input
                      type="number"
                      id="sets"
                      name="sets"
                      min="1"
                      value="3"
                      required
                    />
                    <button
                      type="button"
                      class="stepper-btn"
                      data-target="sets"
                      data-action="increase"
                    >
                      +
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Volume Preview -->
            <div id="volumePreview" class="volume-preview">
              <span class="volume-label">Volume total:</span>
              <span class="volume-value">0 kg</span>
            </div>

            <div
              style="
                display: flex;
                gap: 0.5rem;
                align-items: center;
                flex-wrap: wrap;
              "
            >
              <button type="submit" class="btn btn-primary btn-submit">
                <span>ğŸ’¾ Enregistrer l'exercice</span>
              </button>
            </div>
          </form>
        </section>

        <!-- Stats Display Section -->
        <section class="stats-display-section">
          <div class="section-header">
            <div style="flex: 1">
              <h2>ğŸ“Š Vos statistiques</h2>
              <p>Consultez votre progression et votre Ã©volution</p>
            </div>
            <div
              class="export-import-buttons"
              style="display: flex; gap: 0.5rem; flex-wrap: wrap"
            >
              <button
                class="btn btn-secondary"
                onclick="showPasswordModal('export')"
                style="padding: 0.5rem 1rem; font-size: 0.875rem"
              >
                ğŸ“¥ Exporter les stats
              </button>
              <button
                class="btn btn-secondary"
                onclick="showPasswordModal('import')"
                style="padding: 0.5rem 1rem; font-size: 0.875rem"
              >
                ğŸ“¤ Importer les stats
              </button>
            </div>
          </div>

          <!-- Exercise Filter -->
          <div class="filter-section-modern">
            <div class="filter-label">
              <span>ğŸ” Filtrer:</span>
            </div>
            <div class="filter-buttons" id="filterButtons">
              <button class="filter-btn active" data-filter="all">Tous</button>
              <!-- Les filtres seront gÃ©nÃ©rÃ©s dynamiquement -->
            </div>
          </div>

          <!-- Stats Cards -->
          <div id="statsCards" class="stats-cards">
            <!-- Les cartes de stats seront gÃ©nÃ©rÃ©es dynamiquement -->
          </div>

          <!-- Charts Section -->
          <div id="chartsSection" class="charts-section" style="display: none">
            <div class="section-header-small">
              <h3>ğŸ“ˆ Ã‰volution des performances</h3>
            </div>
            <div class="chart-container">
              <canvas id="progressChart"></canvas>
            </div>
          </div>

          <!-- Stats Table -->
          <div id="statsTable" class="stats-table-container">
            <div class="section-header-small">
              <h3>ğŸ“‹ Historique complet</h3>
            </div>
            <div class="table-wrapper">
              <table class="stats-table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Exercice</th>
                    <th>Poids</th>
                    <th>RÃ©p</th>
                    <th>SÃ©ries</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="statsTableBody">
                  <!-- Les lignes seront gÃ©nÃ©rÃ©es dynamiquement -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Empty State -->
          <div id="emptyState" class="empty-state">
            <div class="empty-icon">ğŸ¯</div>
            <h3>Aucune statistique enregistrÃ©e</h3>
            <p>Commencez par ajouter votre premier exercice ci-dessus !</p>
            <button
              class="btn btn-secondary refresh-button"
              onclick="refreshStats()"
              style="margin-top: 1rem"
            >
              ğŸ”„ Actualiser les exercices
            </button>
          </div>
        </section>
      </div>
    </main>

    <!-- Password Modal for Export/Import -->
    <div id="passwordModal" class="password-modal" style="display: none">
      <div class="password-modal-content">
        <h3 id="passwordModalTitle">ğŸ”’ AccÃ¨s protÃ©gÃ©</h3>
        <p id="passwordModalMessage">
          Veuillez entrer le mot de passe pour continuer
        </p>
        <input
          type="password"
          id="passwordInput"
          class="password-input"
          placeholder="Mot de passe"
          autocomplete="off"
        />
        <div class="password-modal-buttons">
          <button class="btn btn-primary" onclick="handlePasswordSubmit()">
            Valider
          </button>
          <button class="btn btn-secondary" onclick="closePasswordModal()">
            Annuler
          </button>
        </div>
        <p
          id="passwordError"
          class="password-error"
          style="
            display: none;
            color: var(--danger-color);
            margin-top: 0.5rem;
            font-size: 0.875rem;
          "
        ></p>
      </div>
    </div>

    <!-- File Input for Import (hidden) -->
    <input
      type="file"
      id="importFileInput"
      accept=".json"
      style="display: none"
      onchange="handleFileImport(event)"
    />

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2024 NeoStats. Tous droits rÃ©servÃ©s.</p>
      </div>
    </footer>

    <script src="js/exercise-images.js"></script>
    <script src="js/exercise-muscle-zones.js"></script>
    <script src="js/exercise-equipment.js"></script>
    <script src="js/musculation.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
